{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useCallback, useEffect, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Link from 'next/link';\nimport { v4 as uuidv4 } from 'uuid';\nimport { Button, Avatar, Typography, Skeleton, Empty, List } from 'antd';\nimport moment from 'moment';\nimport { LOAD_BLOG_POSTS_REQUEST } from '../../reducers/types';\nmoment.locale('ko');\nvar Title = Typography.Title;\n\nfunction BlogPage() {\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      currentUser = _useSelector.currentUser;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.blog;\n  }),\n      blogPosts = _useSelector2.blogPosts,\n      loadBlogPostsDone = _useSelector2.loadBlogPostsDone,\n      loadBlogPostsLoading = _useSelector2.loadBlogPostsLoading,\n      noMorePosts = _useSelector2.noMorePosts,\n      skip = _useSelector2.skip,\n      limit = _useSelector2.limit;\n\n  useEffect(function () {\n    function onScroll() {\n      if (window.pageYOffset + document.documentElement.clientHeight > document.documentElement.scrollHeight - 300) {\n        if (!loadBlogPostsLoading && !noMorePosts) {\n          dispatch({\n            type: LOAD_BLOG_POSTS_REQUEST,\n            payload: {\n              skip: skip,\n              limit: limit\n            }\n          });\n        }\n      }\n    }\n\n    window.addEventListener('scroll', onScroll);\n    return function () {\n      window.removeEventListener('scroll', onScroll);\n    };\n  }, [loadBlogPostsLoading, noMorePosts, skip, limit, blogPosts]);\n  var renderSkeleton = useMemo(function () {\n    return Array.from(Array(2)).map(function (_) {\n      return /*#__PURE__*/_jsx(Skeleton, {}, uuidv4());\n    });\n  }, []);\n  var rootDivStyle = useMemo(function () {\n    return {\n      width: '75%',\n      margin: '3rem auto'\n    };\n  }, []);\n  var titleDivStyle = useMemo(function () {\n    return {\n      textAlign: 'center',\n      marginTop: 100,\n      marginBottom: 30\n    };\n  }, []);\n  var buttonWrapperDivStyle = useMemo(function () {\n    return {\n      display: 'flex'\n    };\n  }, []);\n  var buttonStyle = useMemo(function () {\n    return {\n      marginLeft: 'auto',\n      marginBottom: 20\n    };\n  }, []);\n  var emptyWrapperStyle = useMemo(function () {\n    return {\n      margin: '200px auto'\n    };\n  }, []);\n  var renderBlogPosts = useCallback(function () {\n    return /*#__PURE__*/_jsx(List, {\n      width: \"100%\",\n      itemLayout: \"horizontal\",\n      dataSource: blogPosts,\n      renderItem: function renderItem(post) {\n        return /*#__PURE__*/_jsx(List.Item, {\n          children: /*#__PURE__*/_jsx(List.Item.Meta, {\n            avatar: /*#__PURE__*/_jsx(Avatar, {\n              src: post.writer.image,\n              style: {\n                marginTop: 7\n              }\n            }),\n            title: /*#__PURE__*/_jsx(Link, {\n              href: \"/blog/\".concat(post._id),\n              children: /*#__PURE__*/_jsx(\"a\", {\n                children: post.title\n              })\n            }),\n            description: /*#__PURE__*/_jsxs(\"span\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between'\n              },\n              children: [/*#__PURE__*/_jsx(\"p\", {\n                children: post.writer.name\n              }), /*#__PURE__*/_jsx(\"p\", {\n                style: {\n                  marginTop: 10\n                },\n                children: moment(post.createdAt).fromNow()\n              })]\n            })\n          })\n        });\n      }\n    });\n  }, [blogPosts]);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    style: rootDivStyle,\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      style: titleDivStyle,\n      children: /*#__PURE__*/_jsx(Title, {\n        level: 2,\n        children: \"\\uBE14\\uB85C\\uADF8 \\uBAA9\\uB85D\"\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      style: buttonWrapperDivStyle,\n      children: /*#__PURE__*/_jsx(Button, {\n        type: \"primary\",\n        disabled: !currentUser.isAuth,\n        loading: loadBlogPostsLoading,\n        style: buttonStyle,\n        children: /*#__PURE__*/_jsx(Link, {\n          href: \"/blog/create\",\n          children: /*#__PURE__*/_jsx(\"a\", {\n            children: \"\\uAE00\\uC4F0\\uAE30\"\n          })\n        })\n      })\n    }), loadBlogPostsLoading && renderSkeleton, loadBlogPostsDone && blogPosts.length > 0 && renderBlogPosts(), loadBlogPostsDone && blogPosts.length === 0 && /*#__PURE__*/_jsx(\"div\", {\n      style: emptyWrapperStyle,\n      children: /*#__PURE__*/_jsx(Empty, {\n        description: \"\\uBE14\\uB85C\\uADF8\\uC5D0 \\uAC8C\\uC2DC\\uAE00\\uC774 \\uC544\\uC9C1 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"\n      })\n    })]\n  });\n}\n\nexport default BlogPage;","map":{"version":3,"sources":["/Users/justinjeong/Github/javascript/githubIo/client/components/Blog/BlogPage.js"],"names":["React","useCallback","useEffect","useMemo","useDispatch","useSelector","Link","v4","uuidv4","Button","Avatar","Typography","Skeleton","Empty","List","moment","LOAD_BLOG_POSTS_REQUEST","locale","Title","BlogPage","dispatch","state","user","currentUser","blog","blogPosts","loadBlogPostsDone","loadBlogPostsLoading","noMorePosts","skip","limit","onScroll","window","pageYOffset","document","documentElement","clientHeight","scrollHeight","type","payload","addEventListener","removeEventListener","renderSkeleton","Array","from","map","_","rootDivStyle","width","margin","titleDivStyle","textAlign","marginTop","marginBottom","buttonWrapperDivStyle","display","buttonStyle","marginLeft","emptyWrapperStyle","renderBlogPosts","post","writer","image","_id","title","justifyContent","name","createdAt","fromNow","isAuth","length"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useMemo } from 'react'\nimport { useDispatch, useSelector } from 'react-redux';\nimport Link from 'next/link';\nimport { v4 as uuidv4 } from 'uuid'\nimport { Button, Avatar, Typography, Skeleton, Empty, List } from 'antd'\nimport moment from 'moment'\nimport { LOAD_BLOG_POSTS_REQUEST } from '../../reducers/types'\nmoment.locale('ko');\n\nconst { Title } = Typography;\n\nfunction BlogPage() {\n\n  const dispatch = useDispatch();\n  const { currentUser } = useSelector(state => state.user)\n  const { blogPosts, loadBlogPostsDone, loadBlogPostsLoading, noMorePosts, skip, limit } = useSelector(state => state.blog)\n\n  useEffect(() => {\n    function onScroll() {\n      if (window.pageYOffset + document.documentElement.clientHeight > document.documentElement.scrollHeight - 300) {\n        if (!loadBlogPostsLoading && !noMorePosts) {\n          dispatch({\n            type: LOAD_BLOG_POSTS_REQUEST,\n            payload: { skip, limit },\n          });\n        }\n      }\n    }\n    window.addEventListener('scroll', onScroll);\n    return () => {\n      window.removeEventListener('scroll', onScroll);\n    };\n  }, [loadBlogPostsLoading, noMorePosts, skip, limit, blogPosts]);\n\n  const renderSkeleton = useMemo(() => (Array.from(Array(2)).map(_ => <Skeleton key={uuidv4()} />)), [])\n  const rootDivStyle = useMemo(() => ({ width: '75%', margin: '3rem auto' }), [])\n  const titleDivStyle = useMemo(() => ({ textAlign: 'center', marginTop: 100, marginBottom: 30 }), [])\n  const buttonWrapperDivStyle = useMemo(() => ({ display: 'flex' }), [])\n  const buttonStyle = useMemo(() => ({ marginLeft: 'auto', marginBottom: 20 }), [])\n  const emptyWrapperStyle = useMemo(() => ({ margin: '200px auto' }), [])\n\n  const renderBlogPosts = useCallback(() => (\n    <List\n      width=\"100%\"\n      itemLayout=\"horizontal\"\n      dataSource={blogPosts}\n      renderItem={post => (\n        <List.Item>\n          <List.Item.Meta\n            avatar={<Avatar src={post.writer.image} style={{ marginTop: 7 }} />}\n            title={<Link href={`/blog/${post._id}`}><a>{post.title}</a></Link>}\n            description={\n              <span style={{ display: 'flex', justifyContent: 'space-between' }}>\n                <p>{post.writer.name}</p>\n                <p style={{ marginTop: 10 }}>{moment(post.createdAt).fromNow()}</p>\n              </span>}\n          />\n        </List.Item>\n      )}\n    />\n  ), [blogPosts])\n\n  return (\n    <div style={rootDivStyle}>\n      <div style={titleDivStyle}>\n        <Title level={2} >블로그 목록</Title>\n      </div>\n      <div style={buttonWrapperDivStyle}>\n        <Button\n          type='primary'\n          disabled={!currentUser.isAuth}\n          loading={loadBlogPostsLoading}\n          style={buttonStyle}>\n          <Link href='/blog/create'>\n            <a>글쓰기</a>\n          </Link>\n        </Button>\n      </div>\n\n      {loadBlogPostsLoading && renderSkeleton}\n      {loadBlogPostsDone && blogPosts.length > 0 &&\n        renderBlogPosts()}\n      {loadBlogPostsDone && blogPosts.length === 0 &&\n        <div style={emptyWrapperStyle}>\n          <Empty description='블로그에 게시글이 아직 없습니다.' />\n        </div>\n      }\n    </div >\n  )\n}\n\nexport default BlogPage\n"]},"metadata":{},"sourceType":"module"}