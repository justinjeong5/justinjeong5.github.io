{"ast":null,"code":"import produce from 'immer';\nimport { REGISTER_USER_REQUEST, REGISTER_USER_SUCCESS, REGISTER_USER_FAILURE, LOGIN_USER_REQUEST, LOGIN_USER_SUCCESS, LOGIN_USER_FAILURE, LOGOUT_USER_REQUEST, LOGOUT_USER_SUCCESS, LOGOUT_USER_FAILURE, AUTHENTICATE_USER_REQUEST, AUTHENTICATE_USER_SUCCESS, AUTHENTICATE_USER_FAILURE, EDIT_USER_REQUEST, EDIT_USER_SUCCESS, EDIT_USER_FAILURE, CONFIRM_USER_REQUEST, CONFIRM_USER_SUCCESS, CONFIRM_USER_FAILURE, UPLOAD_USER_IMAGE_REQUEST, UPLOAD_USER_IMAGE_SUCCESS, UPLOAD_USER_IMAGE_FAILURE } from './types';\nconst initialState = {\n  currentUser: {},\n  cartWithDetail: [],\n  message: '',\n  registerUserLoading: false,\n  registerUserDone: false,\n  registerUserError: null,\n  loginUserLoading: false,\n  loginUserDone: false,\n  loginUserError: null,\n  logoutUserLoading: false,\n  logoutUserDone: false,\n  logoutUserError: null,\n  authenticateUserLoading: false,\n  authenticateUserDone: false,\n  authenticateUserError: null,\n  confirmUserLoading: false,\n  confirmUserDone: false,\n  confirmUserError: null,\n  editUserLoading: false,\n  editUserDone: false,\n  editUserError: null,\n  addToCartLoading: false,\n  addToCartDone: false,\n  addToCartError: null,\n  loadCartItemsLoading: false,\n  loadCartItemsDone: false,\n  loadCartItemsError: null,\n  removeCartItemLoading: false,\n  removeCartItemDone: false,\n  removeCartItemError: null,\n  uploadUserImageLoading: false,\n  uploadUserImageDone: false,\n  uploadUserImageError: null\n};\n\nconst user = (state = initialState, action) => {\n  return produce(state, draft => {\n    switch (action.type) {\n      case REGISTER_USER_REQUEST:\n        draft.registerUserLoading = true;\n        draft.registerUserDone = false;\n        draft.registerUserError = null;\n        break;\n\n      case REGISTER_USER_SUCCESS:\n        draft.registerUserLoading = false;\n        draft.registerUserDone = true;\n        draft.message = action.payload.message;\n        break;\n\n      case REGISTER_USER_FAILURE:\n        draft.registerUserLoading = false; // draft.registerUserError = action.error.code;\n\n        draft.message = action.error.message;\n        break;\n\n      case LOGIN_USER_REQUEST:\n        draft.loginUserLoading = true;\n        draft.loginUserDone = false;\n        draft.loginUserError = null;\n        break;\n\n      case LOGIN_USER_SUCCESS:\n        draft.loginUserLoading = false;\n        draft.loginUserDone = true;\n        draft.currentUser.userId = action.payload.userId;\n        draft.message = action.payload.message;\n        break;\n\n      case LOGIN_USER_FAILURE:\n        draft.loginUserLoading = false;\n        draft.loginUserError = action.error.code;\n        draft.message = action.error.message;\n        break;\n\n      case LOGOUT_USER_REQUEST:\n        draft.logoutUserLoading = true;\n        draft.logoutUserDone = false;\n        draft.logoutUserError = null;\n        break;\n\n      case LOGOUT_USER_SUCCESS:\n        draft.logoutUserLoading = false;\n        draft.logoutUserDone = true;\n        draft.currentUser = {};\n        draft.message = action.payload.message;\n        break;\n\n      case LOGOUT_USER_FAILURE:\n        draft.logoutUserLoading = false;\n        draft.logoutUserError = action.error.code;\n        draft.message = action.error.message;\n        break;\n\n      case AUTHENTICATE_USER_REQUEST:\n        draft.authenticateUserLoading = true;\n        draft.authenticateUserDone = false;\n        draft.authenticateUserError = null;\n        break;\n\n      case AUTHENTICATE_USER_SUCCESS:\n        draft.currentUser = action.payload.user;\n        draft.message = action.payload.message;\n        draft.authenticateUserLoading = false;\n        draft.authenticateUserDone = true;\n        draft.registerUserLoading = false;\n        draft.registerUserDone = false;\n        draft.registerUserError = null;\n        draft.loginUserLoading = false;\n        draft.loginUserDone = false;\n        draft.loginUserError = null;\n        draft.logoutUserLoading = false;\n        draft.logoutUserDone = false;\n        draft.logoutUserError = null;\n        draft.confirmUserLoading = false;\n        draft.confirmUserDone = false;\n        draft.confirmUserError = null;\n        draft.editUserLoading = false;\n        draft.editUserDone = false;\n        draft.editUserError = null;\n        break;\n\n      case AUTHENTICATE_USER_FAILURE:\n        draft.currentUser = action.error.user;\n        draft.authenticateUserLoading = false;\n        draft.authenticateUserError = action.error.err;\n        draft.message = action.error.message;\n        break;\n\n      case CONFIRM_USER_REQUEST:\n        draft.confirmUserLoading = true;\n        draft.confirmUserDone = false;\n        draft.confirmUserError = null;\n        break;\n\n      case CONFIRM_USER_SUCCESS:\n        draft.confirmUserLoading = false;\n        draft.confirmUserDone = true;\n        draft.message = action.payload.message;\n        break;\n\n      case CONFIRM_USER_FAILURE:\n        draft.confirmUserLoading = false;\n        draft.confirmUserError = action.error.code;\n        draft.message = action.error.message;\n        break;\n\n      case EDIT_USER_REQUEST:\n        draft.editUserLoading = true;\n        draft.editUserDone = false;\n        draft.editUserError = null;\n        break;\n\n      case EDIT_USER_SUCCESS:\n        draft.editUserLoading = false;\n        draft.editUserDone = true;\n        draft.currentUser.isAuth = true;\n        draft.message = action.payload.message;\n        break;\n\n      case EDIT_USER_FAILURE:\n        draft.editUserLoading = false;\n        draft.editUserError = action.error.code;\n        draft.message = action.error.message;\n        break;\n\n      case ADD_TO_CART_REQUEST:\n        draft.addToCartLoading = true;\n        draft.addToCartDone = false;\n        draft.addToCartError = null;\n        break;\n\n      case ADD_TO_CART_SUCCESS:\n        draft.addToCartLoading = false;\n        draft.addToCartDone = true;\n        draft.currentUser.cart = action.payload.cart;\n        draft.message = action.payload.message;\n        break;\n\n      case ADD_TO_CART_FAILURE:\n        draft.addToCartLoading = false;\n        draft.addToCartError = action.error.code;\n        draft.message = action.error.message;\n        break;\n\n      case LOAD_CART_ITEMS_REQUEST:\n        draft.loadCartItemsLoading = true;\n        draft.loadCartItemsDone = false;\n        draft.loadCartItemsError = null;\n        break;\n\n      case LOAD_CART_ITEMS_SUCCESS:\n        const data = action.payload.productDetails.map((item, index) => ({\n          key: item._id,\n          title: item.title,\n          price: item.price,\n          quantity: draft.currentUser.cart[index].quantity,\n          totalPrice: draft.currentUser.cart[index].quantity * item.price,\n          image: item.images[0].image,\n          tags: [item.sort]\n        }));\n        draft.loadCartItemsLoading = false;\n        draft.loadCartItemsDone = true;\n        draft.cartWithDetail = data;\n        draft.message = action.payload.message;\n        draft.removeCartItemLoading = false;\n        draft.removeCartItemDone = false;\n        break;\n\n      case LOAD_CART_ITEMS_FAILURE:\n        draft.loadCartItemsLoading = false;\n        draft.loadCartItemsError = action.error.code;\n        draft.message = action.error.message;\n        break;\n\n      case REMOVE_CART_ITEM_REQUEST:\n        draft.removeCartItemLoading = true;\n        draft.removeCartItemDone = false;\n        draft.removeCartItemError = null;\n        break;\n\n      case REMOVE_CART_ITEM_SUCCESS:\n        draft.removeCartItemLoading = false;\n        draft.removeCartItemDone = true;\n        draft.currentUser.cart = action.payload.cart;\n        draft.message = action.payload.message;\n        break;\n\n      case REMOVE_CART_ITEM_FAILURE:\n        draft.removeCartItemLoading = false;\n        draft.removeCartItemError = action.error.code;\n        draft.message = action.error.message;\n        break;\n\n      case UPLOAD_USER_IMAGE_REQUEST:\n        draft.uploadUserImageLoading = true;\n        draft.uploadUserImageDone = false;\n        draft.uploadUserImageError = null;\n        break;\n\n      case UPLOAD_USER_IMAGE_SUCCESS:\n        draft.uploadUserImageLoading = false;\n        draft.uploadUserImageDone = true;\n        draft.currentUser.image = action.payload.url;\n        draft.message = action.payload.message;\n        break;\n\n      case UPLOAD_USER_IMAGE_FAILURE:\n        draft.uploadUserImageLoading = false;\n        draft.uploadUserImageError = action.error.code;\n        draft.message = action.error.message;\n        break;\n\n      default:\n        break;\n    }\n  });\n};\n\nexport default user;","map":{"version":3,"sources":["/Users/justinjeong/Github/javascript/githubIo/client/reducers/user.js"],"names":["produce","REGISTER_USER_REQUEST","REGISTER_USER_SUCCESS","REGISTER_USER_FAILURE","LOGIN_USER_REQUEST","LOGIN_USER_SUCCESS","LOGIN_USER_FAILURE","LOGOUT_USER_REQUEST","LOGOUT_USER_SUCCESS","LOGOUT_USER_FAILURE","AUTHENTICATE_USER_REQUEST","AUTHENTICATE_USER_SUCCESS","AUTHENTICATE_USER_FAILURE","EDIT_USER_REQUEST","EDIT_USER_SUCCESS","EDIT_USER_FAILURE","CONFIRM_USER_REQUEST","CONFIRM_USER_SUCCESS","CONFIRM_USER_FAILURE","UPLOAD_USER_IMAGE_REQUEST","UPLOAD_USER_IMAGE_SUCCESS","UPLOAD_USER_IMAGE_FAILURE","initialState","currentUser","cartWithDetail","message","registerUserLoading","registerUserDone","registerUserError","loginUserLoading","loginUserDone","loginUserError","logoutUserLoading","logoutUserDone","logoutUserError","authenticateUserLoading","authenticateUserDone","authenticateUserError","confirmUserLoading","confirmUserDone","confirmUserError","editUserLoading","editUserDone","editUserError","addToCartLoading","addToCartDone","addToCartError","loadCartItemsLoading","loadCartItemsDone","loadCartItemsError","removeCartItemLoading","removeCartItemDone","removeCartItemError","uploadUserImageLoading","uploadUserImageDone","uploadUserImageError","user","state","action","draft","type","payload","error","userId","code","err","isAuth","ADD_TO_CART_REQUEST","ADD_TO_CART_SUCCESS","cart","ADD_TO_CART_FAILURE","LOAD_CART_ITEMS_REQUEST","LOAD_CART_ITEMS_SUCCESS","data","productDetails","map","item","index","key","_id","title","price","quantity","totalPrice","image","images","tags","sort","LOAD_CART_ITEMS_FAILURE","REMOVE_CART_ITEM_REQUEST","REMOVE_CART_ITEM_SUCCESS","REMOVE_CART_ITEM_FAILURE","url"],"mappings":"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","sourcesContent":["import produce from 'immer'\n\nimport {\n  REGISTER_USER_REQUEST, REGISTER_USER_SUCCESS, REGISTER_USER_FAILURE,\n  LOGIN_USER_REQUEST, LOGIN_USER_SUCCESS, LOGIN_USER_FAILURE,\n  LOGOUT_USER_REQUEST, LOGOUT_USER_SUCCESS, LOGOUT_USER_FAILURE,\n  AUTHENTICATE_USER_REQUEST, AUTHENTICATE_USER_SUCCESS, AUTHENTICATE_USER_FAILURE,\n  EDIT_USER_REQUEST, EDIT_USER_SUCCESS, EDIT_USER_FAILURE,\n  CONFIRM_USER_REQUEST, CONFIRM_USER_SUCCESS, CONFIRM_USER_FAILURE,\n  UPLOAD_USER_IMAGE_REQUEST, UPLOAD_USER_IMAGE_SUCCESS, UPLOAD_USER_IMAGE_FAILURE,\n} from './types'\n\nconst initialState = {\n  currentUser: {},\n  cartWithDetail: [],\n  message: '',\n\n  registerUserLoading: false,\n  registerUserDone: false,\n  registerUserError: null,\n  loginUserLoading: false,\n  loginUserDone: false,\n  loginUserError: null,\n  logoutUserLoading: false,\n  logoutUserDone: false,\n  logoutUserError: null,\n  authenticateUserLoading: false,\n  authenticateUserDone: false,\n  authenticateUserError: null,\n  confirmUserLoading: false,\n  confirmUserDone: false,\n  confirmUserError: null,\n  editUserLoading: false,\n  editUserDone: false,\n  editUserError: null,\n  addToCartLoading: false,\n  addToCartDone: false,\n  addToCartError: null,\n  loadCartItemsLoading: false,\n  loadCartItemsDone: false,\n  loadCartItemsError: null,\n  removeCartItemLoading: false,\n  removeCartItemDone: false,\n  removeCartItemError: null,\n  uploadUserImageLoading: false,\n  uploadUserImageDone: false,\n  uploadUserImageError: null,\n}\n\nconst user = (state = initialState, action) => {\n  return produce(state, (draft) => {\n    switch (action.type) {\n      case REGISTER_USER_REQUEST:\n        draft.registerUserLoading = true;\n        draft.registerUserDone = false;\n        draft.registerUserError = null;\n        break;\n      case REGISTER_USER_SUCCESS:\n        draft.registerUserLoading = false;\n        draft.registerUserDone = true;\n        draft.message = action.payload.message;\n        break;\n      case REGISTER_USER_FAILURE:\n        draft.registerUserLoading = false;\n        // draft.registerUserError = action.error.code;\n        draft.message = action.error.message;\n        break;\n      case LOGIN_USER_REQUEST:\n        draft.loginUserLoading = true;\n        draft.loginUserDone = false;\n        draft.loginUserError = null;\n        break;\n      case LOGIN_USER_SUCCESS:\n        draft.loginUserLoading = false;\n        draft.loginUserDone = true;\n        draft.currentUser.userId = action.payload.userId;\n        draft.message = action.payload.message;\n        break;\n      case LOGIN_USER_FAILURE:\n        draft.loginUserLoading = false;\n        draft.loginUserError = action.error.code;\n        draft.message = action.error.message;\n        break;\n      case LOGOUT_USER_REQUEST:\n        draft.logoutUserLoading = true;\n        draft.logoutUserDone = false;\n        draft.logoutUserError = null;\n        break;\n      case LOGOUT_USER_SUCCESS:\n        draft.logoutUserLoading = false;\n        draft.logoutUserDone = true;\n        draft.currentUser = {};\n        draft.message = action.payload.message;\n        break;\n      case LOGOUT_USER_FAILURE:\n        draft.logoutUserLoading = false;\n        draft.logoutUserError = action.error.code;\n        draft.message = action.error.message;\n        break;\n      case AUTHENTICATE_USER_REQUEST:\n        draft.authenticateUserLoading = true;\n        draft.authenticateUserDone = false;\n        draft.authenticateUserError = null;\n        break;\n      case AUTHENTICATE_USER_SUCCESS:\n        draft.currentUser = action.payload.user;\n        draft.message = action.payload.message;\n\n        draft.authenticateUserLoading = false;\n        draft.authenticateUserDone = true;\n        draft.registerUserLoading = false;\n        draft.registerUserDone = false;\n        draft.registerUserError = null;\n        draft.loginUserLoading = false;\n        draft.loginUserDone = false;\n        draft.loginUserError = null;\n        draft.logoutUserLoading = false;\n        draft.logoutUserDone = false;\n        draft.logoutUserError = null;\n        draft.confirmUserLoading = false;\n        draft.confirmUserDone = false;\n        draft.confirmUserError = null;\n        draft.editUserLoading = false;\n        draft.editUserDone = false;\n        draft.editUserError = null;\n        break;\n      case AUTHENTICATE_USER_FAILURE:\n        draft.currentUser = action.error.user;\n        draft.authenticateUserLoading = false;\n        draft.authenticateUserError = action.error.err;\n        draft.message = action.error.message;\n        break;\n      case CONFIRM_USER_REQUEST:\n        draft.confirmUserLoading = true;\n        draft.confirmUserDone = false;\n        draft.confirmUserError = null;\n        break;\n      case CONFIRM_USER_SUCCESS:\n        draft.confirmUserLoading = false;\n        draft.confirmUserDone = true;\n        draft.message = action.payload.message;\n        break;\n      case CONFIRM_USER_FAILURE:\n        draft.confirmUserLoading = false;\n        draft.confirmUserError = action.error.code;\n        draft.message = action.error.message;\n        break;\n      case EDIT_USER_REQUEST:\n        draft.editUserLoading = true;\n        draft.editUserDone = false;\n        draft.editUserError = null;\n        break;\n      case EDIT_USER_SUCCESS:\n        draft.editUserLoading = false;\n        draft.editUserDone = true;\n        draft.currentUser.isAuth = true;\n        draft.message = action.payload.message;\n        break;\n      case EDIT_USER_FAILURE:\n        draft.editUserLoading = false;\n        draft.editUserError = action.error.code;\n        draft.message = action.error.message;\n        break;\n      case ADD_TO_CART_REQUEST:\n        draft.addToCartLoading = true;\n        draft.addToCartDone = false;\n        draft.addToCartError = null;\n        break;\n      case ADD_TO_CART_SUCCESS:\n        draft.addToCartLoading = false;\n        draft.addToCartDone = true;\n        draft.currentUser.cart = action.payload.cart;\n        draft.message = action.payload.message;\n        break;\n      case ADD_TO_CART_FAILURE:\n        draft.addToCartLoading = false;\n        draft.addToCartError = action.error.code;\n        draft.message = action.error.message;\n        break;\n      case LOAD_CART_ITEMS_REQUEST:\n        draft.loadCartItemsLoading = true;\n        draft.loadCartItemsDone = false;\n        draft.loadCartItemsError = null;\n        break;\n      case LOAD_CART_ITEMS_SUCCESS:\n        const data = action.payload.productDetails.map((item, index) => ({\n          key: item._id,\n          title: item.title,\n          price: item.price,\n          quantity: draft.currentUser.cart[index].quantity,\n          totalPrice: draft.currentUser.cart[index].quantity * item.price,\n          image: item.images[0].image,\n          tags: [item.sort]\n        }));\n\n        draft.loadCartItemsLoading = false;\n        draft.loadCartItemsDone = true;\n        draft.cartWithDetail = data;\n        draft.message = action.payload.message;\n        draft.removeCartItemLoading = false;\n        draft.removeCartItemDone = false;\n        break;\n      case LOAD_CART_ITEMS_FAILURE:\n        draft.loadCartItemsLoading = false;\n        draft.loadCartItemsError = action.error.code;\n        draft.message = action.error.message;\n        break;\n      case REMOVE_CART_ITEM_REQUEST:\n        draft.removeCartItemLoading = true;\n        draft.removeCartItemDone = false;\n        draft.removeCartItemError = null;\n        break;\n      case REMOVE_CART_ITEM_SUCCESS:\n        draft.removeCartItemLoading = false;\n        draft.removeCartItemDone = true;\n        draft.currentUser.cart = action.payload.cart;\n        draft.message = action.payload.message;\n        break;\n      case REMOVE_CART_ITEM_FAILURE:\n        draft.removeCartItemLoading = false;\n        draft.removeCartItemError = action.error.code;\n        draft.message = action.error.message;\n        break;\n      case UPLOAD_USER_IMAGE_REQUEST:\n        draft.uploadUserImageLoading = true;\n        draft.uploadUserImageDone = false;\n        draft.uploadUserImageError = null;\n        break;\n      case UPLOAD_USER_IMAGE_SUCCESS:\n        draft.uploadUserImageLoading = false;\n        draft.uploadUserImageDone = true;\n        draft.currentUser.image = action.payload.url;\n        draft.message = action.payload.message;\n        break;\n      case UPLOAD_USER_IMAGE_FAILURE:\n        draft.uploadUserImageLoading = false;\n        draft.uploadUserImageError = action.error.code;\n        draft.message = action.error.message;\n        break;\n      default:\n        break;\n    }\n  });\n}\n\nexport default user;"]},"metadata":{},"sourceType":"module"}