{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _toConsumableArray from \"/Users/justinjeong/Github/javascript/githubIo/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Router, { useRouter } from 'next/router';\nimport { Typography, Form, Button, message as Message, Input, Space, Select, Divider } from 'antd';\nimport { PlusOutlined } from '@ant-design/icons';\nimport { CREATE_BLOG_POST_REQUEST, RESET_CREATE_BLOG_POST } from '../../reducers/types';\nimport QuillEditor from './Editor/QuillEditor';\nvar Title = Typography.Title;\nvar Option = Select.Option;\n\nfunction CreatePage() {\n  var dispatch = useDispatch();\n  var router = useRouter();\n\n  var _useState = useState(''),\n      content = _useState[0],\n      setContent = _useState[1];\n\n  var _useState2 = useState(''),\n      title = _useState2[0],\n      setTitle = _useState2[1];\n\n  var _useState3 = useState([]),\n      files = _useState3[0],\n      setFiles = _useState3[1];\n\n  var _useState4 = useState(''),\n      newCategory = _useState4[0],\n      setNewCategory = _useState4[1];\n\n  var _useState5 = useState(['자유게시판']),\n      categories = _useState5[0],\n      setCategories = _useState5[1];\n\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      currentUser = _useSelector.currentUser;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.blog;\n  }),\n      createBlogPostLoading = _useSelector2.createBlogPostLoading,\n      createBlogPostDone = _useSelector2.createBlogPostDone,\n      uploadDataset = _useSelector2.uploadDataset,\n      uploadBlogDatasetLoading = _useSelector2.uploadBlogDatasetLoading;\n\n  useEffect(function () {\n    if (createBlogPostDone) {\n      dispatch({\n        type: RESET_CREATE_BLOG_POST\n      });\n      Message.success('게시글이 등록되었습니다.');\n      Router.push('/blog');\n    }\n  }, [dispatch, createBlogPostDone]);\n  var onSubmit = useCallback(function () {\n    if (title.trim() === '') return Message.error('제목을 작성해주세요.');\n    if (content.trim() === '') return Message.error('내용을 작성해주세요.');\n    dispatch({\n      type: CREATE_BLOG_POST_REQUEST,\n      payload: {\n        content: content,\n        title: title,\n        writer: currentUser.userId,\n        files: uploadDataset.files\n      }\n    });\n    setContent('');\n    setTitle('');\n  }, [title, content, currentUser, uploadDataset]);\n  var onEditorChange = useCallback(function (value) {\n    setContent(value);\n  }, []);\n  var onFilesChange = useCallback(function (files) {\n    setFiles(files);\n  }, []);\n  var onChangeTitle = useCallback(function (event) {\n    setTitle(event.target.value);\n  }, []);\n  var handleAddCategory = useCallback(function () {\n    if (!newCategory.trim()) {\n      return setNewCategory('');\n    }\n\n    if (categories.includes(newCategory)) {\n      return Message.error('이미 존재하는 블로그 분류입니다.');\n    }\n\n    setCategories(function (prev) {\n      return [].concat(_toConsumableArray(prev), [newCategory]);\n    });\n    setNewCategory('');\n  }, [newCategory]);\n  var handleCancel = useCallback(function () {\n    router.back();\n  }, []);\n  var handleCategory = useCallback(function (event) {\n    setNewCategory(event.currentTarget.value);\n  }, []);\n  var renderCategory = useCallback(function () {\n    return categories.map(function (category) {\n      return /*#__PURE__*/_jsx(Option, {\n        children: category\n      }, category);\n    });\n  }, [categories]);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    style: {\n      width: '75%',\n      margin: 'auto'\n    },\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      style: {\n        textAlign: 'center',\n        paddingTop: 50\n      },\n      children: /*#__PURE__*/_jsx(Title, {\n        level: 2,\n        children: \"\\uBE14\\uB85C\\uADF8 \\uAE00 \\uC791\\uC131\"\n      })\n    }), /*#__PURE__*/_jsxs(Form, {\n      onFinish: onSubmit,\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        style: {\n          display: 'flex'\n        },\n        children: [/*#__PURE__*/_jsx(Input, {\n          value: title,\n          onChange: onChangeTitle,\n          placeholder: \"\\uC81C\\uBAA9\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\"\n        }), /*#__PURE__*/_jsx(Select, {\n          disabled: !currentUser.role,\n          defaultValue: '자유게시판',\n          style: {\n            width: 240\n          },\n          dropdownRender: function dropdownRender(menu) {\n            return /*#__PURE__*/_jsxs(\"div\", {\n              children: [menu, /*#__PURE__*/_jsx(Divider, {\n                style: {\n                  margin: '4px 0'\n                }\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                style: {\n                  display: 'flex',\n                  flexWrap: 'nowrap',\n                  padding: 8\n                },\n                children: [/*#__PURE__*/_jsx(Input, {\n                  style: {\n                    width: '75%'\n                  },\n                  value: newCategory,\n                  onChange: handleCategory\n                }), /*#__PURE__*/_jsxs(\"span\", {\n                  style: {\n                    marginTop: 5\n                  },\n                  children: [/*#__PURE__*/_jsx(PlusOutlined, {\n                    onClick: handleAddCategory\n                  }), \"\\uCD94\\uAC00\"]\n                })]\n              })]\n            });\n          },\n          children: renderCategory()\n        })]\n      }), /*#__PURE__*/_jsx(QuillEditor, {\n        placeholder: '블로그 글을 작성해주세요.',\n        onEditorChange: onEditorChange,\n        onFilesChange: onFilesChange\n      }), /*#__PURE__*/_jsxs(Space, {\n        style: {\n          textAlign: 'end',\n          marginTop: '1rem'\n        },\n        children: [/*#__PURE__*/_jsx(Button, {\n          htmlType: \"submit\",\n          type: \"primary\",\n          onSubmit: onSubmit,\n          disabled: createBlogPostLoading,\n          loading: createBlogPostLoading || uploadBlogDatasetLoading,\n          children: \"\\uAE00\\uC4F0\\uAE30\"\n        }), /*#__PURE__*/_jsx(Button, {\n          onClick: handleCancel,\n          children: \"\\uCDE8\\uC18C\"\n        })]\n      })]\n    })]\n  });\n}\n\nexport default CreatePage;","map":{"version":3,"sources":["/Users/justinjeong/Github/javascript/githubIo/client/components/Blog/CreatePage.js"],"names":["React","useCallback","useEffect","useState","useDispatch","useSelector","Router","useRouter","Typography","Form","Button","message","Message","Input","Space","Select","Divider","PlusOutlined","CREATE_BLOG_POST_REQUEST","RESET_CREATE_BLOG_POST","QuillEditor","Title","Option","CreatePage","dispatch","router","content","setContent","title","setTitle","files","setFiles","newCategory","setNewCategory","categories","setCategories","state","user","currentUser","blog","createBlogPostLoading","createBlogPostDone","uploadDataset","uploadBlogDatasetLoading","type","success","push","onSubmit","trim","error","payload","writer","userId","onEditorChange","value","onFilesChange","onChangeTitle","event","target","handleAddCategory","includes","prev","handleCancel","back","handleCategory","currentTarget","renderCategory","map","category","width","margin","textAlign","paddingTop","display","role","menu","flexWrap","padding","marginTop"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux';\nimport Router, { useRouter } from 'next/router'\nimport { Typography, Form, Button, message as Message, Input, Space, Select, Divider } from 'antd'\nimport { PlusOutlined } from '@ant-design/icons';\nimport { CREATE_BLOG_POST_REQUEST, RESET_CREATE_BLOG_POST } from '../../reducers/types'\nimport QuillEditor from './Editor/QuillEditor'\n\nconst { Title } = Typography;\nconst { Option } = Select;\n\nfunction CreatePage() {\n\n  const dispatch = useDispatch();\n  const router = useRouter();\n  const [content, setContent] = useState('')\n  const [title, setTitle] = useState('')\n  const [files, setFiles] = useState([]);\n  const [newCategory, setNewCategory] = useState('');\n  const [categories, setCategories] = useState(['자유게시판']);\n\n  const { currentUser } = useSelector(state => state.user)\n  const { createBlogPostLoading, createBlogPostDone, uploadDataset, uploadBlogDatasetLoading } = useSelector(state => state.blog)\n\n  useEffect(() => {\n    if (createBlogPostDone) {\n      dispatch({\n        type: RESET_CREATE_BLOG_POST\n      })\n      Message.success('게시글이 등록되었습니다.')\n      Router.push('/blog')\n    }\n  }, [dispatch, createBlogPostDone])\n\n  const onSubmit = useCallback(() => {\n    if (title.trim() === '') return Message.error('제목을 작성해주세요.');\n    if (content.trim() === '') return Message.error('내용을 작성해주세요.');\n\n    dispatch({\n      type: CREATE_BLOG_POST_REQUEST,\n      payload: {\n        content: content,\n        title: title,\n        writer: currentUser.userId,\n        files: uploadDataset.files\n      },\n    })\n    setContent('');\n    setTitle('');\n  }, [title, content, currentUser, uploadDataset])\n\n  const onEditorChange = useCallback((value) => {\n    setContent(value)\n  }, [])\n\n  const onFilesChange = useCallback((files) => {\n    setFiles(files)\n  }, [])\n\n  const onChangeTitle = useCallback((event) => {\n    setTitle(event.target.value);\n  }, [])\n\n  const handleAddCategory = useCallback(() => {\n    if (!newCategory.trim()) {\n      return setNewCategory('');\n    }\n    if (categories.includes(newCategory)) {\n      return Message.error('이미 존재하는 블로그 분류입니다.')\n    }\n    setCategories(prev => [...prev, newCategory]);\n    setNewCategory('')\n  }, [newCategory])\n\n  const handleCancel = useCallback(() => {\n    router.back()\n  }, [])\n\n  const handleCategory = useCallback((event) => {\n    setNewCategory(event.currentTarget.value)\n  }, [])\n\n  const renderCategory = useCallback(() => categories.map((category) => {\n    return <Option key={category}>{category}</Option>\n  }), [categories])\n\n\n  return (\n    <div style={{ width: '75%', margin: 'auto' }}>\n      <div style={{ textAlign: 'center', paddingTop: 50 }}>\n        <Title level={2} >블로그 글 작성</Title>\n      </div>\n\n      <Form onFinish={onSubmit}>\n        <div style={{ display: 'flex' }}>\n          <Input value={title} onChange={onChangeTitle} placeholder='제목을 입력하세요' />\n          <Select\n            disabled={!currentUser.role}\n            defaultValue={'자유게시판'}\n            style={{ width: 240 }}\n            dropdownRender={menu => (\n              <div>\n                {menu}\n                <Divider style={{ margin: '4px 0' }} />\n                <div style={{ display: 'flex', flexWrap: 'nowrap', padding: 8 }}>\n                  <Input style={{ width: '75%' }} value={newCategory} onChange={handleCategory} />\n                  <span style={{ marginTop: 5 }}>\n                    <PlusOutlined onClick={handleAddCategory} />추가\n                  </span>\n                </div>\n              </div>\n            )}\n          >\n            {renderCategory()}\n          </Select>\n        </div>\n\n        <QuillEditor\n          placeholder={'블로그 글을 작성해주세요.'}\n          onEditorChange={onEditorChange}\n          onFilesChange={onFilesChange}\n        />\n\n        <Space style={{ textAlign: 'end', marginTop: '1rem' }}>\n          <Button\n            htmlType='submit'\n            type='primary'\n            onSubmit={onSubmit}\n            disabled={createBlogPostLoading}\n            loading={createBlogPostLoading || uploadBlogDatasetLoading}\n          >글쓰기</Button>\n          <Button onClick={handleCancel}>취소</Button>\n        </Space>\n      </Form>\n    </div>\n  )\n}\n\nexport default CreatePage;\n"]},"metadata":{},"sourceType":"module"}