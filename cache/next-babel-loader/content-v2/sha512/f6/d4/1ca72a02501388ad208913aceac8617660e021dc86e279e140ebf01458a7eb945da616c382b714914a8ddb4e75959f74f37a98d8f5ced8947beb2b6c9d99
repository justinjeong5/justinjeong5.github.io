{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useCallback, useEffect, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Link from 'next/link';\nimport { v4 as uuidv4 } from 'uuid';\nimport { Button, Avatar, Typography, Skeleton, Empty, List } from 'antd';\nimport moment from 'moment';\nimport { LOAD_BLOG_POSTS_REQUEST } from '../../reducers/types';\nmoment.locale('ko');\nconst {\n  Title\n} = Typography;\n\nfunction BlogPage() {\n  const dispatch = useDispatch();\n  const {\n    currentUser\n  } = useSelector(state => state.user);\n  const {\n    blogPosts,\n    loadBlogPostsDone,\n    loadBlogPostsLoading,\n    noMorePosts,\n    skip,\n    limit\n  } = useSelector(state => state.blog);\n  useEffect(() => {\n    function onScroll() {\n      if (window.pageYOffset + document.documentElement.clientHeight > document.documentElement.scrollHeight - 300) {\n        if (!loadBlogPostsLoading && !noMorePosts) {\n          dispatch({\n            type: LOAD_BLOG_POSTS_REQUEST,\n            payload: {\n              skip,\n              limit\n            }\n          });\n        }\n      }\n    }\n\n    window.addEventListener('scroll', onScroll);\n    return () => {\n      window.removeEventListener('scroll', onScroll);\n    };\n  }, [loadBlogPostsLoading, noMorePosts, skip, limit, blogPosts]);\n  const renderSkeleton = useMemo(() => Array.from(Array(2)).map(_ => /*#__PURE__*/_jsx(Skeleton, {}, uuidv4())), []);\n  const rootDivStyle = useMemo(() => ({\n    width: '75%',\n    margin: '3rem auto'\n  }), []);\n  const titleDivStyle = useMemo(() => ({\n    textAlign: 'center',\n    marginTop: 100,\n    marginBottom: 30\n  }), []);\n  const buttonWrapperDivStyle = useMemo(() => ({\n    display: 'flex'\n  }), []);\n  const buttonStyle = useMemo(() => ({\n    marginLeft: 'auto',\n    marginBottom: 20\n  }), []);\n  const emptyWrapperStyle = useMemo(() => ({\n    margin: '200px auto'\n  }), []);\n  const renderBlogPosts = useCallback(() => /*#__PURE__*/_jsx(List, {\n    width: \"100%\",\n    itemLayout: \"horizontal\",\n    dataSource: blogPosts,\n    renderItem: post => /*#__PURE__*/_jsx(List.Item, {\n      children: /*#__PURE__*/_jsx(List.Item.Meta, {\n        avatar: /*#__PURE__*/_jsx(Avatar, {\n          src: post.writer.image,\n          style: {\n            marginTop: 7\n          }\n        }),\n        title: /*#__PURE__*/_jsx(Link, {\n          href: `/blog/${post._id}`,\n          children: /*#__PURE__*/_jsx(\"a\", {\n            children: post.title\n          })\n        }),\n        description: /*#__PURE__*/_jsxs(\"span\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            children: post.writer.name\n          }), /*#__PURE__*/_jsx(\"p\", {\n            style: {\n              marginTop: 10\n            },\n            children: moment(post.createdAt).fromNow()\n          })]\n        })\n      })\n    })\n  }), [blogPosts]);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    style: rootDivStyle,\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      style: titleDivStyle,\n      children: /*#__PURE__*/_jsx(Title, {\n        level: 2,\n        children: \"\\uBE14\\uB85C\\uADF8 \\uBAA9\\uB85D\"\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      style: buttonWrapperDivStyle,\n      children: /*#__PURE__*/_jsx(Button, {\n        type: \"primary\",\n        disabled: !currentUser.isAuth,\n        loading: loadBlogPostsLoading,\n        style: buttonStyle,\n        children: /*#__PURE__*/_jsx(Link, {\n          href: \"/blog/create\",\n          children: /*#__PURE__*/_jsx(\"a\", {\n            children: \"\\uAE00\\uC4F0\\uAE30\"\n          })\n        })\n      })\n    }), loadBlogPostsLoading && renderSkeleton, loadBlogPostsDone && blogPosts.length > 0 && renderBlogPosts(), loadBlogPostsDone && blogPosts.length === 0 && /*#__PURE__*/_jsx(\"div\", {\n      style: emptyWrapperStyle,\n      children: /*#__PURE__*/_jsx(Empty, {\n        description: \"\\uBE14\\uB85C\\uADF8\\uC5D0 \\uAC8C\\uC2DC\\uAE00\\uC774 \\uC544\\uC9C1 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"\n      })\n    })]\n  });\n}\n\nexport default BlogPage;","map":{"version":3,"sources":["/Users/justinjeong/Github/javascript/githubIo/client/components/Blog/BlogPage.js"],"names":["React","useCallback","useEffect","useMemo","useDispatch","useSelector","Link","v4","uuidv4","Button","Avatar","Typography","Skeleton","Empty","List","moment","LOAD_BLOG_POSTS_REQUEST","locale","Title","BlogPage","dispatch","currentUser","state","user","blogPosts","loadBlogPostsDone","loadBlogPostsLoading","noMorePosts","skip","limit","blog","onScroll","window","pageYOffset","document","documentElement","clientHeight","scrollHeight","type","payload","addEventListener","removeEventListener","renderSkeleton","Array","from","map","_","rootDivStyle","width","margin","titleDivStyle","textAlign","marginTop","marginBottom","buttonWrapperDivStyle","display","buttonStyle","marginLeft","emptyWrapperStyle","renderBlogPosts","post","writer","image","_id","title","justifyContent","name","createdAt","fromNow","isAuth","length"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useMemo } from 'react'\nimport { useDispatch, useSelector } from 'react-redux';\nimport Link from 'next/link';\nimport { v4 as uuidv4 } from 'uuid'\nimport { Button, Avatar, Typography, Skeleton, Empty, List } from 'antd'\nimport moment from 'moment'\nimport { LOAD_BLOG_POSTS_REQUEST } from '../../reducers/types'\nmoment.locale('ko');\n\nconst { Title } = Typography;\n\nfunction BlogPage() {\n\n  const dispatch = useDispatch();\n  const { currentUser } = useSelector(state => state.user)\n  const { blogPosts, loadBlogPostsDone, loadBlogPostsLoading, noMorePosts, skip, limit } = useSelector(state => state.blog)\n\n  useEffect(() => {\n    function onScroll() {\n      if (window.pageYOffset + document.documentElement.clientHeight > document.documentElement.scrollHeight - 300) {\n        if (!loadBlogPostsLoading && !noMorePosts) {\n          dispatch({\n            type: LOAD_BLOG_POSTS_REQUEST,\n            payload: { skip, limit },\n          });\n        }\n      }\n    }\n    window.addEventListener('scroll', onScroll);\n    return () => {\n      window.removeEventListener('scroll', onScroll);\n    };\n  }, [loadBlogPostsLoading, noMorePosts, skip, limit, blogPosts]);\n\n  const renderSkeleton = useMemo(() => (Array.from(Array(2)).map(_ => <Skeleton key={uuidv4()} />)), [])\n  const rootDivStyle = useMemo(() => ({ width: '75%', margin: '3rem auto' }), [])\n  const titleDivStyle = useMemo(() => ({ textAlign: 'center', marginTop: 100, marginBottom: 30 }), [])\n  const buttonWrapperDivStyle = useMemo(() => ({ display: 'flex' }), [])\n  const buttonStyle = useMemo(() => ({ marginLeft: 'auto', marginBottom: 20 }), [])\n  const emptyWrapperStyle = useMemo(() => ({ margin: '200px auto' }), [])\n\n  const renderBlogPosts = useCallback(() => (\n    <List\n      width=\"100%\"\n      itemLayout=\"horizontal\"\n      dataSource={blogPosts}\n      renderItem={post => (\n        <List.Item>\n          <List.Item.Meta\n            avatar={<Avatar src={post.writer.image} style={{ marginTop: 7 }} />}\n            title={<Link href={`/blog/${post._id}`}><a>{post.title}</a></Link>}\n            description={\n              <span style={{ display: 'flex', justifyContent: 'space-between' }}>\n                <p>{post.writer.name}</p>\n                <p style={{ marginTop: 10 }}>{moment(post.createdAt).fromNow()}</p>\n              </span>}\n          />\n        </List.Item>\n      )}\n    />\n  ), [blogPosts])\n\n  return (\n    <div style={rootDivStyle}>\n      <div style={titleDivStyle}>\n        <Title level={2} >블로그 목록</Title>\n      </div>\n      <div style={buttonWrapperDivStyle}>\n        <Button\n          type='primary'\n          disabled={!currentUser.isAuth}\n          loading={loadBlogPostsLoading}\n          style={buttonStyle}>\n          <Link href='/blog/create'>\n            <a>글쓰기</a>\n          </Link>\n        </Button>\n      </div>\n\n      {loadBlogPostsLoading && renderSkeleton}\n      {loadBlogPostsDone && blogPosts.length > 0 &&\n        renderBlogPosts()}\n      {loadBlogPostsDone && blogPosts.length === 0 &&\n        <div style={emptyWrapperStyle}>\n          <Empty description='블로그에 게시글이 아직 없습니다.' />\n        </div>\n      }\n    </div >\n  )\n}\n\nexport default BlogPage\n"]},"metadata":{},"sourceType":"module"}